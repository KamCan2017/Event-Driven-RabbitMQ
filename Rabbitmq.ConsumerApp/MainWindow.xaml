<Window x:Class="Rabbitmq.ConsumerApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:template="clr-namespace:Rabbitmq.ConsumerApp.Template"
        mc:Ignorable="d"
        Title="{Binding Title}" Height="450" Width="800" MinWidth="400" MinHeight="250">
    <Window.Resources>
        <!-- Failed book notification Template -->
        <DataTemplate x:Key="FailedBookTemplate">
            <Grid Margin="5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="60"/>
                    <ColumnDefinition Width="10"/>
                    <ColumnDefinition Width="3*"/>
                </Grid.ColumnDefinitions>
                <Border CornerRadius="8" Background="OrangeRed" BorderThickness="1" BorderBrush="OrangeRed" Padding="5">
                    <TextBlock Text="{Binding State}" Foreground="White" FontWeight="Bold"
                               TextAlignment="Center"/>
                </Border>
                <Border Grid.Column="2" CornerRadius="8" Background="White" BorderThickness="1" BorderBrush="OrangeRed" Padding="5">
                    <TextBlock Text="{Binding Message}" Foreground="OrangeRed" FontWeight="SemiBold"
                               TextAlignment="Center" />
                </Border>
            </Grid>
        </DataTemplate>
        
        <!-- Default book notification Template -->
        <DataTemplate x:Key="DefaultTemplate">
            <Grid Margin="5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="60"/>
                    <ColumnDefinition Width="10"/>
                    <ColumnDefinition Width="3*"/>
                </Grid.ColumnDefinitions>
                <Border CornerRadius="8" Background="White" BorderThickness="1" BorderBrush="#0f3464" Padding="5">
                    <TextBlock Text="{Binding State}" Foreground="#0f3464" FontWeight="Bold"
                               TextAlignment="Center"/>
                </Border>
                <Border Grid.Column="2" CornerRadius="8" Background="White" BorderThickness="1" BorderBrush="#0f3464" Padding="5">
                    <TextBlock Text="{Binding Message}" Foreground="#0f3464" FontWeight="SemiBold"
                               TextAlignment="Center" />
                </Border>
            </Grid>
        </DataTemplate>
        <!-- Delete book notification template-->
        <DataTemplate x:Key="DeleteBookTemplate">
            <Grid Margin="5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="60"/>
                    <ColumnDefinition Width="10"/>
                    <ColumnDefinition Width="3*"/>
                </Grid.ColumnDefinitions>
                <Border CornerRadius="8" Background="White" BorderThickness="1" BorderBrush="#0f3464" Padding="5">
                    <TextBlock Text="{Binding State}" Foreground="#0f3464" FontWeight="Bold"
                               TextAlignment="Center"/>
                </Border>
                <Border Grid.Column="2" CornerRadius="8" Background="White" BorderThickness="1" BorderBrush="#0f3464" Padding="5">
                    <TextBlock Text="{Binding Message}" Foreground="DarkRed" FontWeight="SemiBold"
                               TextAlignment="Center" />
                </Border>
            </Grid>
        </DataTemplate>
        
        <!-- Blocked book notification template-->
        <DataTemplate x:Key="BlockedBookTemplate">
            <Grid Margin="5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="60"/>
                    <ColumnDefinition Width="10"/>
                    <ColumnDefinition Width="3*"/>
                </Grid.ColumnDefinitions>
                <Border CornerRadius="8" Background="White" BorderThickness="1" BorderBrush="#0f3464" Padding="5">
                    <TextBlock Text="{Binding State}" Foreground="#0f3464" FontWeight="Bold"
                               TextAlignment="Center"/>
                </Border>
                <Border Grid.Column="2" CornerRadius="8" Background="White" BorderThickness="1" BorderBrush="#0f3464" Padding="5">
                    <TextBlock Text="{Binding Message}" Foreground="#0f3464" FontWeight="SemiBold"
                               TextAlignment="Center" TextDecorations="Strikethrough"/>
                </Border>
            </Grid>
        </DataTemplate>
        
        <!-- Template Selector Resource -->
        <template:ItemTemplateSelector x:Key="ItemTemplateSelector"
                                    BlockedBookTemplate="{StaticResource BlockedBookTemplate}"
                                    DeleteBookTemplate="{StaticResource DeleteBookTemplate}"
                                    DefaultMessageTemplate="{StaticResource DefaultTemplate}"
                                    FailedBookTemplate="{StaticResource FailedBookTemplate}"/>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="35"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <Border Margin="5" Padding="3" Background="White">
            <TextBlock FontWeight="Bold" Foreground="#0f3464" Margin="5 0 0 0">
                <Run Text="Notifications"/>
                <Run Text="{Binding NotificationCount}"/>
            </TextBlock>
        </Border>
        <Grid  Grid.Row="1" Background="White">
            <ListView ItemsSource="{Binding InfoStates}" Margin="10" Background="WhiteSmoke"
                      ItemTemplateSelector="{StaticResource ItemTemplateSelector}" BorderBrush="#0f3464">
            </ListView>
        </Grid>
    </Grid>
   
</Window>
